---
name: routedbits
prefix: ''

topology:
  defaults:
    kind: linux
    image: ghcr.io/routedbits/vyos:1.4-rolling-202306190317
    sysctls:
      net.ipv6.conf.all.disable_ipv6: 0
    binds:
      - /lib/modules:/lib/modules
      - config.boot:/opt/vyatta/etc/config/config.boot
    entrypoint: '/sbin/init'
  nodes:
    # Core
    r1:
    r2:

    # Spine
    r3:
    r4:
    r5:

    # Leaf
    ce6:
    ce7:
    ce8:


  links:
    # R1
    - endpoints: ["r1:eth1", "r3:eth1"]
    - endpoints: ["r1:eth2", "r4:eth1"]
    - endpoints: ["r1:eth3", "r5:eth1"]
    # R2
    - endpoints: ["r2:eth1", "r3:eth2"]
    - endpoints: ["r2:eth2", "r4:eth2"]
    - endpoints: ["r2:eth3", "r5:eth2"]

    # CE6
    - endpoints: ["ce6:eth1", "r3:eth3"]

    # CE7
    - endpoints: ["ce7:eth1", "r4:eth3"]

    # CE8
    - endpoints: ["ce8:eth1", "r5:eth3"]
